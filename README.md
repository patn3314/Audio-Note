# Audio Note - 発話者分離音声文字起こしアプリ

Audio Noteは、ひとつのマイクで録音した複数人の会話を、周波数などの特徴から発話者を分離して文字起こしするWebアプリケーションです。社外秘情報を含む会議での使用を想定し、すべての処理をブラウザ内で完結させ、外部サーバーにデータを送信しない設計になっています。

## 主な機能

- **音声録音**: Webブラウザのマイク入力を利用した高品質録音
- **発話者分離**: 音声の周波数特性を分析し、複数の話者を自動的に識別
- **文字起こし**: ブラウザ内で動作する音声認識エンジンによる高精度な文字起こし
- **セキュリティ**: すべての処理をクライアント側で実行し、データを外部に送信しない
- **カスタマイズ**: 発話者の名称変更、文字起こし結果のエクスポート機能
- **長時間対応**: 最大2時間の会議にも対応可能な処理設計

## 技術スタック

- **フロントエンド**: HTML5, CSS3, JavaScript (バニラJS)
- **音声処理**: Web Audio API
- **音声認識**: Transformers.js + Whisper (WebGPU対応)
- **データ保存**: IndexedDB
- **UI**: カスタムコンポーネント + レスポンシブデザイン

## ローカルでの実行方法

1. このリポジトリをクローンまたはダウンロードします: git clone https://github.com/yourusername/audio-note.git
2. プロジェクトディレクトリに移動します: cd audio-note
3. ローカルサーバーを起動します。以下のいずれかの方法が使えます:

   - VS Codeの[Live Server拡張機能](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)を使用
   - Pythonの組み込みHTTPサーバーを使用: python -m http.server
   - Node.jsの `http-server`パッケージを使用: npx http-server

   4. ブラウザで `http://localhost:8080`（または表示されたURLアドレス）にアクセスします

## GitHub Pagesでのデプロイ方法

1. GitHubのリポジトリ設定画面で、GitHub Pagesセクションに移動します
2. ソースとして「main」ブランチの「/(root)」を選択します
3. 「Save」ボタンをクリックします
4. 数分後に、提供されたURLでアプリケーションにアクセスできるようになります

## 利用上の注意

- **ブラウザ要件**: 最新のChrome、Edge、Firefoxなどのモダンブラウザでご利用ください
- **マイク権限**: アプリケーションを使用するには、ブラウザによるマイクへのアクセス許可が必要です
- **処理能力**: 音声認識と話者分離は計算負荷が高いため、高性能なデバイスでの使用を推奨します
- **WebGPU**: 高速な音声認識のためにWebGPUが有効なブラウザを使用することをお勧めします
- **データ保存**: 音声データと文字起こし結果はブラウザのIndexedDBに保存され、外部には送信されません

## フォルダ構成

audio-note/
│
├── index.html           # メインHTMLファイル
│
├── css/
│   └── styles.css       # スタイルシート
│
├── js/
│   ├── app.js           # メインアプリケーションロジック
│   ├── audio-processor.js    # 音声処理モジュール
│   ├── database.js      # IndexedDBデータベース操作
│   ├── exporter.js      # 文字起こし結果のエクスポート機能
│   ├── speech-recognition.js # 音声認識モジュール
│   ├── speaker-diarization.js # 話者分離モジュール
│   └── visualizer.js    # 音声可視化モジュール
│
└── README.md            # このファイル

## 設定と使い方

### 録音と処理

1. アプリを開いたら「録音開始」ボタンをクリックします
2. 必要に応じて「一時停止」ボタンで録音を一時停止/再開できます
3. 「録音停止」ボタンをクリックすると録音が終了し、自動的に文字起こしと話者分離処理が開始されます
4. 処理が完了すると、発話者ごとに色分けされた文字起こし結果が表示されます

### 話者名のカスタマイズ

文字起こし結果の上部にある「発話者A」、「発話者B」などの名前をクリックして編集することができます。変更した名前は自動的に結果一覧に反映されます。

### 文字起こし結果のエクスポート

右上の「エクスポート」ボタンから以下の形式でエクスポートできます:

- Markdown形式: 整形されたマークダウン文書として保存
- CSV形式: スプレッドシートで開くことができる形式で保存
- テキスト形式: シンプルなテキストファイルとして保存

また、「コピー」ボタンでクリップボードに現在の文字起こし結果をコピーできます。

### 設定

画面下部の「設定」ボタンをクリックすると設定画面が開きます:

- **音声認識モデル**: 精度と速度のバランスを調整できる異なるモデルを選択
- **セグメント長**: 処理するセグメントの長さを調整（長いセグメントは精度が向上する可能性がある）
- **最大話者数**: 識別する最大の話者数を設定

## ライセンス

このプロジェクトは[MITライセンス](LICENSE)の下で公開されています。

## 謝辞

このプロジェクトは以下のオープンソースプロジェクトに支えられています:

- [Transformers.js](https://github.com/xenova/transformers.js) - ブラウザ向けの機械学習モデル
- [Whisper](https://github.com/openai/whisper) - OpenAIの音声認識モデル
- [Dexie.js](https://github.com/dexie/Dexie.js) - IndexedDBのラッパーライブラリ
